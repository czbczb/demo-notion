{"ast":null,"code":"import _classCallCheck from \"/Users/mobvista/cui_workspace/notion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mobvista/cui_workspace/notion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/mobvista/cui_workspace/notion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/mobvista/cui_workspace/notion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/mobvista/cui_workspace/notion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/mobvista/cui_workspace/notion/src/selectMenu.js\";\nimport React from \"react\";\nimport { matchSorter } from \"match-sorter\";\nimport maxEditor from \"./maxEditor\";\nvar MENU_HEIGHT = 150;\nvar allowedTags = [{\n  id: \"page-title\",\n  tag: \"h1\",\n  label: \"Page Title\"\n}, {\n  id: \"heading\",\n  tag: \"h2\",\n  label: \"Heading\"\n}, {\n  id: \"subheading\",\n  tag: \"h3\",\n  label: \"Subheading\"\n}, {\n  id: \"paragraph\",\n  tag: \"p\",\n  label: \"Paragraph\"\n}, {\n  id: \"maxEditor\",\n  tag: \"maxEditor\",\n  label: \"cmaxEditorode\"\n}, {\n  id: \"img\",\n  tag: \"img\",\n  label: \"img\"\n}];\n\nvar SelectMenu = /*#__PURE__*/function (_React$Component) {\n  _inherits(SelectMenu, _React$Component);\n\n  var _super = _createSuper(SelectMenu);\n\n  function SelectMenu(props) {\n    var _this;\n\n    _classCallCheck(this, SelectMenu);\n\n    _this = _super.call(this, props);\n    _this.keyDownHandler = _this.keyDownHandler.bind(_assertThisInitialized(_this));\n    _this.state = {\n      command: \"\",\n      items: allowedTags,\n      selectedItem: 0\n    };\n    return _this;\n  } // Attach a key listener to add any given key to the command\n\n\n  _createClass(SelectMenu, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener(\"keydown\", this.keyDownHandler);\n    } // Whenever the command changes, look for matching tags in the list\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var command = this.state.command;\n\n      if (prevState.command !== command) {\n        var items = matchSorter(allowedTags, command, {\n          keys: [\"tag\"]\n        });\n        this.setState({\n          items: items\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener(\"keydown\", this.keyDownHandler);\n    }\n  }, {\n    key: \"keyDownHandler\",\n    value: function keyDownHandler(e) {\n      var items = this.state.items;\n      var selected = this.state.selectedItem;\n      var command = this.state.command;\n\n      switch (e.key) {\n        case \"Enter\":\n          e.preventDefault();\n          this.props.onSelect(items[selected].tag);\n          break;\n\n        case \"Backspace\":\n          if (!command) this.props.close();\n          this.setState({\n            command: command.substring(0, command.length - 1)\n          });\n          break;\n\n        case \"ArrowUp\":\n          e.preventDefault();\n          var prevSelected = selected === 0 ? items.length - 1 : selected - 1;\n          this.setState({\n            selectedItem: prevSelected\n          });\n          break;\n\n        case \"ArrowDown\":\n        case \"Tab\":\n          e.preventDefault();\n          var nextSelected = selected === items.length - 1 ? 0 : selected + 1;\n          this.setState({\n            selectedItem: nextSelected\n          });\n          break;\n\n        default:\n          this.setState({\n            command: this.state.command + e.key\n          });\n          break;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      // Define the absolute position before rendering\n      var x = this.props.position.x;\n      var y = this.props.position.y - MENU_HEIGHT;\n      var positionAttributes = {\n        top: y,\n        left: x\n      };\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"SelectMenu\",\n        style: positionAttributes,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"Items\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 9\n        }\n      }, this.state.items.map(function (item, key) {\n        var selectedItem = _this2.state.selectedItem;\n        var isSelected = _this2.state.items.indexOf(item) === selectedItem;\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: isSelected ? \"Selected\" : null,\n          key: key,\n          role: \"button\",\n          tabIndex: \"0\",\n          onClick: function onClick() {\n            return _this2.props.onSelect(item.tag);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }\n        }, item.label);\n      })));\n    }\n  }]);\n\n  return SelectMenu;\n}(React.Component);\n\nexport default SelectMenu;","map":{"version":3,"names":["React","matchSorter","maxEditor","MENU_HEIGHT","allowedTags","id","tag","label","SelectMenu","props","keyDownHandler","bind","state","command","items","selectedItem","document","addEventListener","prevProps","prevState","keys","setState","removeEventListener","e","selected","key","preventDefault","onSelect","close","substring","length","prevSelected","nextSelected","x","position","y","positionAttributes","top","left","map","item","isSelected","indexOf","Component"],"sources":["/Users/mobvista/cui_workspace/notion/src/selectMenu.js"],"sourcesContent":["import React from \"react\";\nimport { matchSorter } from \"match-sorter\";\nimport maxEditor from \"./maxEditor\"\nconst MENU_HEIGHT = 150;\nconst allowedTags = [\n  {\n    id: \"page-title\",\n    tag: \"h1\",\n    label: \"Page Title\"\n  },\n  {\n    id: \"heading\",\n    tag: \"h2\",\n    label: \"Heading\"\n  },\n  {\n    id: \"subheading\",\n    tag: \"h3\",\n    label: \"Subheading\"\n  },\n  {\n    id: \"paragraph\",\n    tag: \"p\",\n    label: \"Paragraph\"\n  },\n  {\n    id: \"maxEditor\",\n    tag: \"maxEditor\",\n    label: \"cmaxEditorode\"\n  },\n  {\n    id: \"img\",\n    tag: \"img\",\n    label: \"img\"\n  }\n];\n\nclass SelectMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.keyDownHandler = this.keyDownHandler.bind(this);\n    this.state = {\n      command: \"\",\n      items: allowedTags,\n      selectedItem: 0\n    };\n  }\n\n  // Attach a key listener to add any given key to the command\n  componentDidMount() {\n    document.addEventListener(\"keydown\", this.keyDownHandler);\n  }\n\n  // Whenever the command changes, look for matching tags in the list\n  componentDidUpdate(prevProps, prevState) {\n    const command = this.state.command;\n    if (prevState.command !== command) {\n      const items = matchSorter(allowedTags, command, { keys: [\"tag\"] });\n      this.setState({ items: items });\n    }\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"keydown\", this.keyDownHandler);\n  }\n\n  keyDownHandler(e) {\n    const items = this.state.items;\n    const selected = this.state.selectedItem;\n    const command = this.state.command;\n\n    switch (e.key) {\n      case \"Enter\":\n        e.preventDefault();\n        this.props.onSelect(items[selected].tag);\n        break;\n      case \"Backspace\":\n        if (!command) this.props.close();\n        this.setState({ command: command.substring(0, command.length - 1) });\n        break;\n      case \"ArrowUp\":\n        e.preventDefault();\n        const prevSelected = selected === 0 ? items.length - 1 : selected - 1;\n        this.setState({ selectedItem: prevSelected });\n        break;\n      case \"ArrowDown\":\n      case \"Tab\":\n        e.preventDefault();\n        const nextSelected = selected === items.length - 1 ? 0 : selected + 1;\n        this.setState({ selectedItem: nextSelected });\n        break;\n      default:\n        this.setState({ command: this.state.command + e.key });\n        break;\n    }\n  }\n\n  render() {\n    // Define the absolute position before rendering\n    const x = this.props.position.x;\n    const y = this.props.position.y - MENU_HEIGHT;\n    const positionAttributes = { top: y, left: x };\n\n    return (\n      <div className=\"SelectMenu\" style={positionAttributes}>\n        <div className=\"Items\">\n          {this.state.items.map((item, key) => {\n            const selectedItem = this.state.selectedItem;\n            const isSelected = this.state.items.indexOf(item) === selectedItem;\n            return (\n              <div\n                className={isSelected ? \"Selected\" : null}\n                key={key}\n                role=\"button\"\n                tabIndex=\"0\"\n                onClick={() => this.props.onSelect(item.tag)}\n              >\n                {item.label}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SelectMenu;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}